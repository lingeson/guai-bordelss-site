<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GUAI BORDEL'SS 2025 - Résultats</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <header class="bg-black text-white p-4 text-center">
    <h1 class="text-2xl font-bold">GUAI BORDEL'SS 2025 - Résultats</h1>
  </header>

  <main class="p-4 max-w-6xl mx-auto">
    <!-- Navigation -->
    <nav class="flex flex-wrap gap-2 mb-6">
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="handball">Handball</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="rugby">Rugby</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="footm">Foot M</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="footf">Foot F</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="volleym">Volley M</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="volleyf">Volley F</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="basketm">Basket M</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="basketf">Basket F</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="tennis">Tennis</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="badminton">Badminton</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="pingpong">Ping-pong</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="athletisme">Athlétisme</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="natation">Natation</button>
      <button class="tab bg-white border px-4 py-2 rounded shadow" data-sport="escalade">Escalade</button>
    </nav>

    <!-- Contenu -->
    <section id="resultats" class="bg-white p-4 rounded shadow">
      <p class="text-gray-500">Choisissez un sport pour afficher les résultats.</p>
    </section>
  </main>

  <footer class="text-center text-sm text-gray-500 p-4">
    © GUAI BORDEL'SS 2025
  </footer>

  <script>
    const urls = {
      handball: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=0&single=true&output=csv",
      rugby: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=702928165&single=true&output=csv",
      footm: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=35127129&single=true&output=csv",
      footf: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=504548277&single=true&output=csv",
      volleym: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1516588087&single=true&output=csv",
      volleyf: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1381709457&single=true&output=csv",
      basketm: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=896073508&single=true&output=csv",
      basketf: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=254686168&single=true&output=csv",
      tennis: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1395710737&single=true&output=csv",
      badminton: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=546083894&single=true&output=csv",
      pingpong: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=906615525&single=true&output=csv",
      athletisme: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=906615525&single=true&output=csv",
      natation: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=130176564&single=true&output=csv",
      escalade: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=361482653&single=true&output=csv",
    };

    const resultatsDiv = document.getElementById("resultats");

    document.querySelectorAll(".tab").forEach(button => {
      button.addEventListener("click", () => {
        const sport = button.dataset.sport;
        const url = urls[sport];

        resultatsDiv.innerHTML = `<p class="text-sm text-gray-400">Chargement des résultats...</p>`;

        Papa.parse(url, {
          download: true,
          header: true,
          complete: function (results) {
            if (results.errors.length > 0) {
              resultatsDiv.innerHTML = `<p class="text-red-500">Erreur de chargement : ${results.errors[0].message}</p>`;
              return;
            }

            const data = results.data.filter(row => Object.values(row).some(cell => cell !== ""));
            if (data.length === 0) {
              resultatsDiv.innerHTML = `<p class="text-gray-500">Aucun résultat disponible.</p>`;
              return;
            }

            let table = `<table class="w-full text-sm text-left"><thead><tr>`;
            Object.keys(data[0]).forEach(col => {
              table += `<th class="border px-2 py-1 bg-gray-100">${col}</th>`;
            });
            table += `</tr></thead><tbody>`;
            data.forEach(row => {
              table += `<tr>`;
              Object.values(row).forEach(cell => {
                table += `<td class="border px-2 py-1">${cell}</td>`;
              });
              table += `</tr>`;
            });
            table += `</tbody></table>`;
            resultatsDiv.innerHTML = table;
          },
          error: function (err) {
            resultatsDiv.innerHTML = `<p class="text-red-500">Erreur de chargement : ${err.message}</p>`;
          }
        });
      });
    });
  </script>
</body>
</html>
