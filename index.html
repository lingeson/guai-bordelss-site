<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GUAI BORDEL'SS 2025</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
  <header>
    <h1>GUAI BORDEL'SS 2025</h1>
    <nav>
      <button onclick="showTab('accueil')">üè† Accueil</button>
      <button onclick="showTab('resultats')">üìã R√©sultats</button>
      <button onclick="showTab('classements')">üèÜ Classements</button>
      <button onclick="showTab('phasefinale')">üéØ Phase Finale</button>
      <button onclick="showTab('contacts')">üìû Contacts Urgence</button>
    </nav>
  </header>

  <main>
    <section id="accueil" class="tab active">
      <h2>Bienvenue sur le site des GUAI BORDEL'SS 2025</h2>
      <p>Retrouvez ici tous les r√©sultats, classements et informations importantes du tournoi !</p>
    </section>

    <section id="resultats" class="tab">
      <h2>R√©sultats</h2>
      <div id="sports-resultats"></div>
    </section>

    <section id="classements" class="tab">
      <h2>Classements</h2>
      <div id="sports-classements"></div>
    </section>

    <section id="phasefinale" class="tab">
      <h2>Phase Finale</h2>
      <div id="finales"></div>
    </section>

    <section id="contacts" class="tab">
      <h2>Contacts d'urgence</h2>
      <ul>
        <li><strong>Responsable g√©n√©ral :</strong> Jean Dupont - 06 01 02 03 04</li>
        <li><strong>M√©decin :</strong> Dr. Durand - 06 05 06 07 08</li>
        <li><strong>S√©curit√© :</strong> S√©curiTeam - 06 09 10 11 12</li>
      </ul>
    </section>
  </main>

  <script>
    const sports = {
      handball: {
        handball: { nom: "üß´ Handball", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQQpiogP-Kxoy3rgyFf1nEZd6GxJ_3mcB7pR6LuBPnEP1Y2ThgIOT6qThTDmgv4uV4O3zzl2ZgAZMlu/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQQpiogP-Kxoy3rgyFf1nEZd6GxJ_3mcB7pR6LuBPnEP1Y2ThgIOT6qThTDmgv4uV4O3zzl2ZgAZMlu/pub?output=csv" },
      rugby: { nom: "üèâ Rugby", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRXr9r0Rbn6xQ7tU7BaV2acg9goIg3B8aIQVbLKo9VaSo4cD2zRfcmWEy-ykMmn6cAfKbe7Bbi1Dz2F/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRXr9r0Rbn6xQ7tU7BaV2acg9goIg3B8aIQVbLKo9VaSo4cD2zRfcmWEy-ykMmn6cAfKbe7Bbi1Dz2F/pub?output=csv" },
      footM: { nom: "‚öΩ Foot M", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vStQn6qHboPiPGtDGUhh2BSakvRP1JSgLIlEgfNL69BBlOt4-MHZEEpTztXUeDX8E62CKuor_tzNJQu/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vStQn6qHboPiPGtDGUhh2BSakvRP1JSgLIlEgfNL69BBlOt4-MHZEEpTztXUeDX8E62CKuor_tzNJQu/pub?output=csv" },
      volleyM: { nom: "üèê Volley M", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQaVG4Zs-cpCnG3nJzrT9OxqHgA6NEunZXO_7Gp7ePyOEaZBuLwAOQihKObOmmuUs_J6ufxAlj8UOhK/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQaVG4Zs-cpCnG3nJzrT9OxqHgA6NEunZXO_7Gp7ePyOEaZBuLwAOQihKObOmmuUs_J6ufxAlj8UOhK/pub?output=csv" },
      basketM: { nom: "üèÄ Basket M", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRAqgDiI__ebRHj-m9gz6BvJmFSpMN5axdk7qv1BQpmTEnKpY-BQnDpDjUjHcQff5TkDL6xe3sGd-yJ/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRAqgDiI__ebRHj-m9gz6BvJmFSpMN5axdk7qv1BQpmTEnKpY-BQnDpDjUjHcQff5TkDL6xe3sGd-yJ/pub?output=csv" },
      basketF: { nom: "üèÄ Basket F", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBWrlYVqBK7doMJnK0xqvxnFn8Tn9bH_fzDPqgUpM9CMcZIFjefm7nV3glRfhMmJhC5Ar0Z_M6-UfJ/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBWrlYVqBK7doMJnK0xqvxnFn8Tn9bH_fzDPqgUpM9CMcZIFjefm7nV3glRfhMmJhC5Ar0Z_M6-UfJ/pub?output=csv" },
      footF: { nom: "‚öΩ Foot F", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTLVDj4Hw5mnT6cZfZSKgmNRbZgXUqt53dU65P2JeJ95DqpmVUpyUq9ViX46_ydkK4zY9tx7Dey8CGi/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTLVDj4Hw5mnT6cZfZSKgmNRbZgXUqt53dU65P2JeJ95DqpmVUpyUq9ViX46_ydkK4zY9tx7Dey8CGi/pub?output=csv" },
      volleyF: { nom: "üèê Volley F", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQIPQJmTZMMP4keMn5-POJ9dI6sQqMB-jWc4wVrKQUj4XTKjX9h3WZsxqegTdpFTK8oOMBCt-YLq7Hx/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vQIPQJmTZMMP4keMn5-POJ9dI6sQqMB-jWc4wVrKQUj4XTKjX9h3WZsxqegTdpFTK8oOMBCt-YLq7Hx/pub?output=csv" },
      tennis: { nom: "üéæ Tennis", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTwW3LzMXzp28Z7J-sX3Q5LXE5KuZIkv-NazOdZShOcNAv8-yLJZjXEv6Gn3VbrVU4e_bTzQeQ62yGl/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTwW3LzMXzp28Z7J-sX3Q5LXE5KuZIkv-NazOdZShOcNAv8-yLJZjXEv6Gn3VbrVU4e_bTzQeQ62yGl/pub?output=csv" },
      badminton: { nom: "üé∏ Badminton", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRRAvj-Y9dREemf9ctEFb8p_zVDlRmAoQ2f2EpbOrLEokHZFnNPRXeQEvBP-nFO8T0HPd8FJjeediy1/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRRAvj-Y9dREemf9ctEFb8p_zVDlRmAoQ2f2EpbOrLEokHZFnNPRXeQEvBP-nFO8T0HPd8FJjeediy1/pub?output=csv" },
      pingpong: { nom: "üèì Ping-pong", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTHKY_xehXcUOEiHMRQdUYTtzEKiCF3zDF6OMMcOZkkMkhdM9B8D3XTCpI91T6w1bFaYbD3b0Srs32f/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTHKY_xehXcUOEiHMRQdUYTtzEKiCF3zDF6OMMcOZkkMkhdM9B8D3XTCpI91T6w1bFaYbD3b0Srs32f/pub?output=csv" },
      athletisme: { nom: "üèÉ Athl√©tisme", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRIBYOcJ9ntzWHExa9CwzDhFTYfsBErY-LTfO1HEn8NUxHnE6rql8SDO5TjFrrbzfIXkBd8VniqgmEh/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRIBYOcJ9ntzWHExa9CwzDhFTYfsBErY-LTfO1HEn8NUxHnE6rql8SDO5TjFrrbzfIXkBd8VniqgmEh/pub?output=csv" },
      natation: { nom: "üèä Natation", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vScdfMPYAkA8NPlu9H0TW_EoKZCOK2qHQqJik2gKv-JXc7Rfv07u9gA95HQvutptEVzLad2vBLZEnCw/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vScdfMPYAkA8NPlu9H0TW_EoKZCOK2qHQqJik2gKv-JXc7Rfv07u9gA95HQvutptEVzLad2vBLZEnCw/pub?output=csv" },
      escalade: { nom: "üßÇ Escalade", resultatsSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTSPxTscER9L9s4Z6l0rfWyVrLGHE5LZpsxnKTGO0G5HtRO6N-FtE9SpcFFMd93hZGEXERCKCGn0l7l/pub?output=csv", classementSheet: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTSPxTscER9L9s4Z6l0rfWyVrLGHE5LZpsxnKTGO0G5HtRO6N-FtE9SpcFFMd93hZGEXERCKCGn0l7l/pub?output=csv" }
    };

    function showTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function loadCSV(url, callback) {
      Papa.parse(url, {
        download: true,
        header: true,
        complete: function(results) {
          callback(results.data);
        }
      });
    }

    function renderTable(data) {
      let html = '<table><thead><tr>';
      const headers = Object.keys(data[0]);
      headers.forEach(h => html += `<th>${h}</th>`);
      html += '</tr></thead><tbody>';
      data.forEach(row => {
        html += '<tr>';
        headers.forEach(h => html += `<td>${row[h] || ''}</td>`);
        html += '</tr>';
      });
      html += '</tbody></table>';
      return html;
    }

    function setupSportTabs(containerId, isClassement) {
      const container = document.getElementById(containerId);
      Object.entries(sports).forEach(([key, sport]) => {
        const button = document.createElement('button');
        button.innerText = sport.nom;
        button.onclick = () => {
          const url = isClassement ? sport.classementSheet : sport.resultatsSheet;
          loadCSV(url, data => {
            container.innerHTML = `<h3>${sport.nom}</h3>` + renderTable(data);
          });
        };
        container.appendChild(button);
      });
    }

    setupSportTabs("sports-resultats", false);
    setupSportTabs("sports-classements", true);

    function calculerPhaseFinale() {
      loadCSV(sports.handball.classementSheet, data => {
        const pouleA = data.filter(row => row.Poule === 'A').sort((a, b) => b.Points - a.Points);
        const pouleB = data.filter(row => row.Poule === 'B').sort((a, b) => b.Points - a.Points);

        const demiFinales = [
          `${pouleA[0].Equipe} vs ${pouleB[1].Equipe}`,
          `${pouleB[0].Equipe} vs ${pouleA[1].Equipe}`
        ];

        const finale = "Vainqueur Demi 1 vs Vainqueur Demi 2";
        const petiteFinale = "Perdant Demi 1 vs Perdant Demi 2";

        document.getElementById("finales").innerHTML = `
          <h3>Demi-finales</h3>
          <ul>${demiFinales.map(m => `<li>${m}</li>`).join('')}</ul>
          <h3>Finale</h3>
          <p>${finale}</p>
          <h3>Petite Finale</h3>
          <p>${petiteFinale}</p>
        `;
      });
    }

    document.querySelector('button[onclick*="phasefinale"]').addEventListener('click', calculerPhaseFinale);
  </script>
</body>
</html>
