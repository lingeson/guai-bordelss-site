<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GUAI BORDEL'SS 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #333;
            color: white;
            padding: 10px 0;
            text-align: center;
        }

        header img {
            width: 100px;
            height: auto;
        }

        h2 {
            color: #333;
        }

        section {
            margin: 20px;
        }

        .match,
        .team {
            background-color: #fff;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .team h3 {
            margin: 0;
        }

        .match h3 {
            margin: 0;
            font-size: 1.2em;
        }

        .match p {
            margin: 0.5em 0;
        }

        #results,
        #ranking {
            margin-bottom: 40px;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
            position: absolute;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>

    <header>
        <img src="https://example.com/logo.png" alt="Logo Guai Bordel'ss"> <!-- Remplace par l'URL de ton logo -->
        <h1>GUAI BORDEL'SS 2025</h1>
    </header>

    <section id="results">
        <h2>Résultats des matchs</h2>
        <div id="matches">
            <!-- Les matchs seront insérés ici dynamiquement par JavaScript -->
        </div>
    </section>

    <section id="ranking">
        <h2>Classement des équipes</h2>
        <div id="rankings">
            <!-- Le classement sera affiché ici -->
        </div>
    </section>

    <footer>
        <p>&copy; 2025 GUAI BORDEL'SS. Tous droits réservés.</p>
    </footer>

    <script>
        // L'ID de ta feuille Google Sheets et ta clé API
        const apiKey = "VOTRE_CLE_API";  // Remplace par ta clé API
        const sheetID = "2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT";  // Remplace par l'ID de ta feuille
        const sheetName = "Sheet1";  // Remplace par le nom de ta feuille

        // Fonction pour récupérer les matchs depuis Google Sheets
        function fetchMatches() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${sheetName}?key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    const matches = data.values;
                    const matchesContainer = document.getElementById("matches");
                    matchesContainer.innerHTML = ""; // Réinitialise le contenu avant d'ajouter les nouveaux matchs

                    // Affiche chaque match
                    matches.slice(1).forEach(match => {
                        const sport = match[0];
                        const teamA = match[1];
                        const teamB = match[2];
                        const scoreA = match[3];
                        const scoreB = match[4];
                        const date = match[5];

                        const matchHTML = `
                            <div class="match">
                                <h3>${sport} - ${date}</h3>
                                <p>${teamA} ${scoreA} - ${scoreB} ${teamB}</p>
                            </div>
                        `;
                        matchesContainer.innerHTML += matchHTML;
                    });
                })
                .catch(error => console.error("Erreur lors de la récupération des matchs : ", error));
        }

        // Fonction pour calculer et afficher le classement des équipes
        function fetchRankings() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${sheetName}?key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    const matches = data.values;
                    const rankings = {};

                    // Calcul du score total pour chaque équipe
                    matches.slice(1).forEach(match => {
                        const teamA = match[1];
                        const teamB = match[2];
                        const scoreA = parseInt(match[3]);
                        const scoreB = parseInt(match[4]);

                        // Mise à jour des classements
                        rankings[teamA] = rankings[teamA] ? rankings[teamA] + scoreA : scoreA;
                        rankings[teamB] = rankings[teamB] ? rankings[teamB] + scoreB : scoreB;
                    });

                    // Trier les équipes par score (du plus haut au plus bas)
                    const sortedRankings = Object.entries(rankings)
                        .sort((a, b) => b[1] - a[1]);

                    const rankingsContainer = document.getElementById("rankings");
                    rankingsContainer.innerHTML = "";  // Réinitialiser le contenu

                    // Afficher le classement
                    sortedRankings.forEach(([team, points], index) => {
                        const rankingHTML = `
                            <div class="team">
                                <h3>${index + 1}. ${team} - ${points} points</h3>
                            </div>
                        `;
                        rankingsContainer.innerHTML += rankingHTML;
                    });
                })
                .catch(error => console.error("Erreur lors de la récupération du classement : ", error));
        }

        // Appeler la fonction pour récupérer les matchs et afficher le classement au chargement de la page
        fetchMatches();
        fetchRankings();

        // Rafraîchir les matchs et le classement toutes les 30 secondes
        setInterval(fetchMatches, 30000);  // Rafraîchit les matchs toutes les 30 secondes
        setInterval(fetchRankings, 30000);  // Rafraîchit le classement toutes les 30 secondes
    </script>

</body>

</html>
