<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GUAI BORDEL'SS 2025</title>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background-color: #4CAF50; color: white; padding: 10px 20px; text-align: center; }
    nav { display: flex; justify-content: center; gap: 10px; background-color: #f1f1f1; padding: 10px; }
    nav button { padding: 10px 20px; cursor: pointer; }
    .active { background-color: #4CAF50; color: white; }
    #sport-selector { margin: 10px auto; display: block; padding: 10px; }
    .tab-content { display: none; padding: 20px; }
    .tab-content.active { display: block; }
    .columns { display: flex; justify-content: space-between; gap: 20px; }
    .column { flex: 1; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <header>
    <h1>GUAI BORDEL'SS 2025</h1>
  </header>

  <select id="sport-selector">
    <option value="handball">Handball</option>
    <option value="rugby">Rugby</option>
    <option value="footm">Foot M</option>
    <option value="footf">Foot F</option>
    <option value="volleym">Volley M</option>
    <option value="volleyf">Volley F</option>
    <option value="basketm">Basket M</option>
    <option value="basketf">Basket F</option>
    <option value="tennis">Tennis</option>
    <option value="badminton">Badminton</option>
    <option value="pingpong">Ping-pong</option>
    <option value="athletisme">Athlétisme</option>
    <option value="natation">Natation</option>
    <option value="escalade">Escalade</option>
  </select>

  <nav>
    <button onclick="showTab('poules')" class="active">Résultats poules</button>
    <button onclick="showTab('phase')">Phase finale</button>
    <button onclick="showTab('contacts')">Contacts urgence</button>
  </nav>

  <div id="poules" class="tab-content active">
    <div class="columns">
      <div class="column">
        <h2>Poule A</h2>
        <div id="poule-a"></div>
      </div>
      <div class="column">
        <h2>Poule B</h2>
        <div id="poule-b"></div>
      </div>
    </div>
  </div>

  <div id="phase" class="tab-content">
    <h2>Phase finale</h2>
    <div id="phase-finale"></div>
  </div>

  <div id="contacts" class="tab-content">
    <h2>Contacts d'urgence</h2>
    <ul>
      <li>Pompiers : 18</li>
      <li>Police : 17</li>
      <li>SAMU : 15</li>
      <li>Numéro d'urgence européen : 112</li>
    </ul>
  </div>

  <script>
    const sheetUrls = {
      handball: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=0&single=true&output=csv',
      rugby: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=702928165&single=true&output=csv',
      footm: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=35127129&single=true&output=csv',
      footf: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=504548277&single=true&output=csv',
      volleym: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1516588087&single=true&output=csv',
      volleyf: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1381709457&single=true&output=csv',
      basketm: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=896073508&single=true&output=csv',
      basketf: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=254686168&single=true&output=csv',
      tennis: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=1395710737&single=true&output=csv',
      badminton: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=546083894&single=true&output=csv',
      pingpong: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=906615525&single=true&output=csv',
      athletisme: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=906615525&single=true&output=csv',
      natation: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=130176564&single=true&output=csv',
      escalade: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWrOq4N-KeChvdjO4JaEyMZVm-e3G1PNxbX-gEhC7xMDo1Y2dV6-Ax28BOJ31voFSPHhR_dNHrDzIT/pub?gid=361482653&single=true&output=csv'
    };

    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
    }

    function loadSportData(sport) {
      const url = sheetUrls[sport];
      Papa.parse(url, {
        download: true,
        header: false,
        complete: function(results) {
          const data = results.data;
          const mid = Math.ceil(data.length / 2);
          const pouleA = data.slice(0, mid);
          const pouleB = data.slice(mid);
          renderTable(pouleA, 'poule-a');
          renderTable(pouleB, 'poule-b');
          renderTable(data.slice(-3), 'phase-finale');
        }
      });
    }

    function renderTable(data, containerId) {
      const container = document.getElementById(containerId);
      if (!data || data.length === 0) {
        container.innerHTML = '<p>Aucune donnée.</p>';
        return;
      }
      let html = '<table><thead><tr>' + data[0].map(h => `<th>${h}</th>`).join('') + '</tr></thead><tbody>';
      for (let i = 1; i < data.length; i++) {
        html += '<tr>' + data[i].map(cell => `<td>${cell}</td>`).join('') + '</tr>';
      }
      html += '</tbody></table>';
      container.innerHTML = html;
    }

    document.getElementById('sport-selector').addEventListener('change', (e) => {
      loadSportData(e.target.value);
    });

    // Chargement initial
    loadSportData('handball');
  </script>
</body>
</html>
