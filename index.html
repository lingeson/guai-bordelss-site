<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GUAI BORDEL'SS 2025</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    img.logo {
      max-height: 80px;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background: #34495e;
    }
    nav button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      background: #ecf0f1;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .content {
      padding: 1rem;
    }
    .section {
      display: none;
    }
    .active {
      display: block;
    }
    @media (max-width: 600px) {
      nav button {
        width: 90%;
      }
    }
    .sports-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    .sport-button {
      margin: 10px;
      font-size: 24px;
      cursor: pointer;
      padding: 10px;
      background-color: #ecf0f1;
      border: none;
      border-radius: 5px;
    }
    .sport-button:hover {
      background-color: #bdc3c7;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 8px;
      text-align: center;
      border: 1px solid #ddd;
    }
    th {
      background-color: #34495e;
      color: white;
    }
    .poule-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .poule {
      width: 48%;
      margin-bottom: 20px;
    }
    .match {
      background-color: #ecf0f1;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo" class="logo" />
    <h1>GUAI BORDEL'SS 2025</h1>
  </header>

  <nav>
    <button onclick="showSection('accueil')">Accueil</button>
    <button onclick="showSection('sports')">Résultats des matchs</button>
    <button onclick="showSection('classement')">Classement</button>
  </nav>

  <div class="content">
    <div id="accueil" class="section active">
      <h2>Bienvenue !</h2>
      <p>Retrouvez ici toutes les infos des GUAI BORDEL'SS 2025.</p>
    </div>

    <div id="sports" class="section">
      <h2>Résultats des matchs</h2>
      <div class="sports-buttons" id="sports-buttons">
        <!-- Boutons des sports seront ajoutés ici -->
      </div>
      <div id="matches">
        <!-- Les résultats des matchs seront affichés ici -->
      </div>
    </div>

    <div id="classement" class="section">
      <h2>Classement</h2>
      <div class="sports-buttons" id="classement-buttons">
        <!-- Boutons des sports seront ajoutés ici -->
      </div>
      <div id="classement-table">
        <!-- Classement sera injecté ici -->
      </div>
    </div>
  </div>

  <script>
    const sportsWithPoules = [
      { name: 'Volley M', emoji: '🏐', gid: 'GID_VOLLEY_M' },
      { name: 'Foot M', emoji: '⚽', gid: 'GID_FOOT_M' },
      { name: 'Basket M', emoji: '🏀', gid: 'GID_BASKET_M' },
      { name: 'Handball', emoji: '🤾', gid: 'GID_HANDBALL' },
      { name: 'Rugby', emoji: '🏈', gid: '702928165' },
      { name: 'Basket F', emoji: '🏀', gid: 'GID_BASKET_F' },
      { name: 'Foot F', emoji: '⚽', gid: 'GID_FOOT_F' },
      { name: 'Volley F', emoji: '🏐', gid: 'GID_VOLLEY_F' }
    ];

    const sportsSansPoules = [
      { name: 'Tennis', emoji: '🎾', gid: 'GID_TENNIS' },
      { name: 'Badminton', emoji: '🏸', gid: 'GID_BADMINTON' },
      { name: 'Ping-pong', emoji: '🏓', gid: 'GID_PINGPONG' },
      { name: 'Escalade', emoji: '🧗', gid: 'GID_ESCALADE' },
      { name: 'Athlétisme', emoji: '🏃', gid: 'GID_ATHLETISME' },
      { name: 'Natation', emoji: '🏊', gid: 'GID_NATATION' }
    ];

    const allSports = [...sportsWithPoules, ...sportsSansPoules];

    const spreadsheetId = '1_I7gPvoryoMh97V6F4DLdQIV2Qe32nKzpyOMZBXuELE';

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function createSportButtons() {
      const sportsButtonsContainer = document.getElementById('sports-buttons');
      const classementButtonsContainer = document.getElementById('classement-buttons');

      allSports.forEach(sport => {
        const button = document.createElement('button');
        button.className = 'sport-button';
        button.innerText = `${sport.emoji} ${sport.name}`;
        button.onclick = () => fetchMatches(sport);
        sportsButtonsContainer.appendChild(button);

        const classementButton = document.createElement('button');
        classementButton.className = 'sport-button';
        classementButton.innerText = `${sport.emoji} ${sport.name}`;
        classementButton.onclick = () => fetchRanking(sport);
        classementButtonsContainer.appendChild(classementButton);
      });
    }

    async function fetchMatches(sport) {
      const url = `https://docs.google.com/spreadsheets/d/${spreadsheetId}/export?format=csv&gid=${sport.gid}`;
      const response = await fetch(url);
      const text = await response.text();
      const lines = text.trim().split('\n');
      const headers = lines[0].split(',');
      const data = lines.slice(1).map(line => line.split(','));

      const matchesContainer = document.getElementById('matches');
      matchesContainer.innerHTML = `<h3>${sport.emoji} ${sport.name}</h3>`;

      if (sportsWithPoules.some(s => s.name === sport.name)) {
        const poules = { 'A': [], 'B': [] };

        data.forEach(row => {
          const poule = row[0];
          if (poules[poule]) {
            poules[poule].push(row);
          }
        });

        const pouleContainer = document.createElement('div');
        pouleContainer.className = 'poule-container';

        ['A', 'B'].forEach(pouleName => {
          const pouleDiv = document.createElement('div');
          pouleDiv.className = 'poule';
          pouleDiv.innerHTML = `<h4>Poule ${pouleName}</h4>`;

          const equipes = [...new Set(poules[pouleName].map(row => row[1]).concat(poules[pouleName].map(row => row[2])))];
          const equipeList = document.createElement('ul');
          equipes.forEach(equipe => {
            const li = document.createElement('li');
            li.innerText = equipe;
            equipeList.appendChild(li);
          });
          pouleDiv.appendChild(equipeList);

          const table = document.createElement('table');
          const thead = document.createElement('thead');
          thead.innerHTML = '<tr><th>Jour</th><th>Heure</th><th>Terrain</th><th>Équipe A</th><th>Score A</th><th>Score B</th><th>Équipe B</th></tr>';
          table.appendChild(thead);
          const tbody = document.createElement('tbody');

          poules[pouleName].forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${row[3]}</td><td>${row[4]}</td><td>${row[5]}</td><td>${row[1]}</td><td>${row[6]}</td><td>${row[7]}</td><td>${row[2]}</td>`;
            tbody
::contentReference[oaicite:26]{index=26}
 
